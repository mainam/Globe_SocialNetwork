var stmfileid,stmtitle,stmbanner;var DeviceWT=window.innerWidth;var rsNH=130;$(document).ready(function(){(function($){$.fn.modalWindow=function(){var t=this;id=t.attr("href").length>0?t.attr("href"):t.data("target");showModal(id);return this;};$.fn.modalShow=function(){var t=this;showModal(t);return this;};$.fn.modalDismiss=function(){var t=this;t.on("click",function(e){e.preventDefault();hideModal(t);});return this;};$.fn.modalHide=function(){var t=this;hideModal(t);return this;};function showModal(t){var hgt=$(t).innerHeight()-$(t).find(".model_head").height()-30;$(t).find(".model_cont").css({"height":hgt}).scrollTop(0);$(t).fadeIn("fast");$("#overlay").fadeIn("slow");}function hideModal(t){t.closest('[data-lable="modal"]').fadeOut("fast");$("#overlay").fadeOut("slow");}function hideModal(){$('[data-lable="modal"]').fadeOut("fast");$("#overlay").fadeOut("slow");}$(function(){modal=$('[data-plugin="modal"]');if(modal.length>0){modal.on("click",function(e){e.preventDefault();$(this).modalWindow();});$('[data-dismiss="modal"]').modalDismiss();$(document).on("keyup",function(e){if(e.which==27){hideModal();}});}});}(jQuery));var is_typing,timer=2000;$("#inputchoosephone").on("keyup",function(){tln=$(this).val().length;if(tln>=2){t=$(this).val();is_typing=setTimeout(function(){chooseBrand(t);},timer);}else{$(".phoneListHl").hide();}});$("#inputchoosephone").on("keydown",function(){clearTimeout(is_typing);});$(".topBrand").on("click",function(e){e.preventDefault();t=$(this).data("brand");$("#inputchoosephone").val(t).focus();chooseBrand(t);});$("#phoneList").on("click",".st_phone",function(){t=$(this).data("wurflid");$("#inputchoosephoneid").val(t);$("#inputchoosephone").val($(this).text());$(".phoneListHl").hide();setMobileDevice();});$("#notfoundphoneform").on("submit",function(e){e.preventDefault();if($("#inputchoosephone").val().length>=2){chooseBrand(t);}});$("#notfoundphoneform").on("submit",function(e){e.preventDefault();inputchoosephone=$("#inputchoosephone").val();nlp=$("#notListedPhone").val();$.ajax({url:ajaxPage+"&action=setDevice",type:"POST",data:{missingMobile:nlp,selectphone:inputchoosephone},success:function(data){$(".cypMessage").show();setTimeout(function(){$("#choosedevice").find('[data-dismiss="modal"]').trigger("click");},2000);}});});$('[data-dismiss="modal"]').on("click",function(){$("#inputchoosephone").val("");$("#inputchoosephoneid").val("");$("#notListedPhone").val("");$(".cypMessage").hide();$(".phoneListHl").hide();});$("#sendsms").on("keyup",function(){$("#sendemail").val("");});$("#sendemail").on("keyup",function(){$("#sendsms").val("");});$(".stmclose").on("click",function(){$("#stmform")[0].reset();$(".stmmessage").removeClass("red green").html("");});$("#stmform").on("submit",function(e){e.preventDefault();$(".stmmessage").removeClass("red green").html("");var fileid=stmfileid;var title=stmtitle;var smsValue=$("#sendsms").val();var emailValue=$("#sendemail").val();var stmtype=(smsValue)?"sms":(emailValue)?"email":"";var stmvalue=(smsValue)?smsValue:(emailValue)?emailValue:"";if((smsValue==null||smsValue=="")&&(emailValue==null||emailValue=="")){$(".stmmessage").addClass("red").html("Email or SMS field cannot be kept blank. Please enter valid email or sms");return false;}else{if(emailValue){var emailRegExp=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(emailValue.search(emailRegExp)==-1){$(".stmmessage").addClass("red").html("Email address doesn't seem valid. Please enter valid email address.");return false;}}else{if(smsValue){var pattern=/^\d{10}$/;if((smsValue.search(pattern)==-1)||isNaN(smsValue)){$(".stmmessage").addClass("red").html("Mobile number doesn't seem valid. Please enter valid 10 digit mobile number.");return false;}}}}if(smsValue||emailValue){var stmUrl=ajaxPage+"&action=sendtomobile&type="+stmtype+"&fileid="+fileid+"&value="+stmvalue+"&title="+title;$.get(stmUrl,function(data){var dataRes=JSON.parse(data);if(dataRes.success){$(".stmmessage").addClass("green").html(dataRes.msg);setTimeout(function(){$("#stmform")[0].reset();$(".stmmessage").removeClass("red green").html("");stmChkTnc($("#tnc"));$("#sendtomobile").find('[data-dismiss="modal"]').trigger("click");},1000);if(stmbanner){madBanner("d");}}else{$(".stmmessage").addClass("red").html(dataRes.msg);}});}else{$(".stmmessage").addClass("red").html("Email or SMS field cannot be kept blank. Please enter valid email or sms");}});$("#frmEditProfile").on("submit",function(e){e.preventDefault();$("#errorMsg").html("").addClass("display-none").removeClass("red green");var pswd1=$("#npasswd").val();var pswd2=$("#conpasswd").val();var countryid=$("#countryid").val();var cellnum=$("#cellnumber").val();var exp=/[^a-zA-Z0-9]/g;var p=$('[name="frmEditProfile"]').parent(".editProf").position();var pos=p.top;if(pswd1!=""||pswd2!=""){if(pswd1==""){$("#errorMsg").removeClass("display-none").addClass("red").html("Enter New Password.");$("html,body").scrollTop(pos);return false;}if(exp.test(pswd1)||exp.test(pswd2)){$("#errorMsg").removeClass("display-none").addClass("red").html("Spaces and special characters are not allowed in password.");$("html,body").scrollTop(pos);return false;}if(pswd1.length<3||pswd1.length>12){$("#errorMsg").removeClass("display-none").addClass("red").html("Password length must be between 3 and 12.");$("body,html").scrollTop(pos);return false;}if(pswd1!=pswd2){$("#errorMsg").removeClass("display-none").addClass("red").html("New Password and confirm password is not matching.");$("body,html").scrollTop(pos);return false;}}if($("#company").length){var exp2=/[^a-zA-Z0-9 ]/g;var company=$("#company").val();if(company.length>20){$("#errorMsg").removeClass("display-none").html("Company Name length must be within 20");$("body,html").scrollTop(pos);return false;}if(exp2.test(company)){$("#errorMsg").removeClass("display-none").html("Special characters are not allowed in company name");$("body,html").scrollTop(pos);return false;}}if(countryid==0||countryid==""){$("#errorMsg").removeClass("display-none").html("Please select country.");$("body,html").scrollTop(pos);return false;}if($.trim(cellnum)!=""&&!$.isNumeric(cellnum)){$("#errorMsg").removeClass("display-none").html("Enter valid mobile number.");$("body,html").scrollTop(pos);return false;}$("#eploader").show();$.ajax({type:"post",url:ajaxPage+"&action=updateEditProfile",data:$("#frmEditProfile").serialize(),dataType:"json",success:function(respData){$("#eploader").hide();if(respData.error==true){$("#errorMsg").removeClass("display-none").addClass("padb10 red display-block").html(respData.msg);}else{$("#errorMsg").removeClass("red display-none").addClass("padb10 green display-block").html(respData.msg);}if(respData.url){setTimeout(function(){window.location=respData.url;},1000);}}});});$("#signupDeveloper").on("click",function(){if($("#signupDeveloper").prop("checked")){$("#devInfo").removeClass("display-none").addClass("display-block");$("#devInfo").find("#company").attr("required","required");}else{$("#devInfo").removeClass("display-block").addClass("display-none");$("#devInfo").find("#company").removeAttr("required");}});$("#contactForm").on("submit",function(e){var fname=$("#fname").val();var email=$("#email").val();var reason=$("#reason").val();var flag=true;var emailRegExp=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(email.search(emailRegExp)==-1){$("#contactResponse").addClass("red").html("Email address doesn't seem valid. Please enter valid email address.");flag=false;}var nameRegExp=/^([a-zA-Z0-9_\s]+)$/i;if(fname.search(nameRegExp)==-1){$("#contactResponse").addClass("red").html("Please give a valid name.");flag=false;}if(!flag){e.preventDefault();$("#contactDisplay").removeClass("display-none");}});slidenav=$("#subcontentslider");wh=$(window).innerHeight();dh=$(document).innerHeight();sctob=0;resizeRightNavHeight(rsNH);$(document).on("scroll",function(){st=$(this).scrollTop();sctob=(dh-st)-wh;if(sctob<=70){rsNH=200;}else{rsNH=130;}resizeRightNavHeight(rsNH);});});$(window).on("resize",function(){wh=$(window).innerHeight();dh=$(document).innerHeight();resizeRightNavHeight(rsNH);});function chooseBrand(t){$(".phoneListHl").show();if(t.length>0){$("#phoneList").html("<li>Searching...</li>");}$.ajax({url:ajaxPage+"&action=chooseYourPhone",type:"POST",data:{searchQuery:t},dataType:"json",success:function(data){var selOpt="";if(data!="No Record Found"){$("#searchPhone").removeAttr("disabled");$("#searchPhone").removeClass("btn-gray-mid").addClass("btn-orange-mid");$.each(data,function(i,d){selOpt+='<li data-wurflid="'+d.id+'" class="st_phone">'+d.title+"</li>";});}else{selOpt='<li><span  class="red">No record found</span></li>';$("#searchPhone").attr("disabled",true);$("#searchPhone").removeClass("btn-orange-mid").addClass("btn-gray-mid");setTimeout(function(){$(".phoneListHl").fadeOut();},3000);}$("#phoneList").html(selOpt);}});}function setMobileDevice(){wurflDevice=$("#inputchoosephone").val();wurflDeviceId=$("#inputchoosephoneid").val();$("#inputchoosephoneid").val();$.ajax({url:ajaxPage+"&action=setDevice",type:"POST",dataType:"json",data:{wurflId:wurflDeviceId,valueMobile:wurflDevice},success:function(data){$("#choosedevice").find('[data-dismiss="modal"]').trigger("click");if(data.result==true){location.replace(data.url);}else{location.reload();}}});}function resizeRightNavHeight(h){if(DeviceWT>1023){setTimeout(function(){slidenav.css({height:wh-h});},50);}}$("body").on("click",".stmClk",function(){t=$(this);n_sendToMobile(t);});$("#tnc").on("click",function(){stmChkTnc($(this));});function stmChkTnc(t){if(t.is(":checked")){$("#sendSubmit").removeClass("btn-gray-nm").addClass("btn-blue-nm");$("#sendSubmit").removeAttr("disabled");$("#tnctxt").hide();}else{$("#sendSubmit").removeClass("btn-blue-nm").addClass("btn-gray-nm");if($("#sendSubmit").attr("disabled")!="disabled"){$("#sendSubmit").attr("disabled","disabled");}$("#tnctxt").show();}}$(".mad_sendtomobile").on("click",function(){$("#mad_popup").modalHide();t=$(this);setTimeout(function(){n_sendToMobile(t);},500);});function n_sendToMobile(t){stmfileid=t.attr("data_fileid");stmtitle=t.attr("data_title");stmbanner=t.attr("data_banner");$(".stmmessage").html("");$("#sendemail").val("");$("#sendsms").val("");t.modalWindow();}